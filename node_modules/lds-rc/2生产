#!/bin/sh
#安装模块
if [ ! -d "./node_modules" ]; then  
	npm install
fi
#覆盖模块配置
cp -r -f ./node_modules_rewrite/react-scripts/* ./node_modules/react-scripts
#构建生成
npm run build
#清理打包文件
rm -rf ./pack/*.zip
#构建打包文件
zip -q -j -r ./pack/app.zip ./pack/all/static/js/app.*.js ./pack/all/static/css/app.*.css
zip -q -j -r ./pack/lamp.zip ./pack/all/static/js/lamp.*.js ./pack/all/static/css/lamp.*.css
#发布
scp -r ./pack root@192.168.6.116:/usr/local/application/lds-rc